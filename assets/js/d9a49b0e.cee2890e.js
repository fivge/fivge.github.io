"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6795],{919:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>o});var s=r(5893),l=r(1151);const a={id:"update",title:"Angular Update"},t=void 0,c={id:"FE/angular/excel/update",title:"Angular Update",description:"Angular \u7248\u672c\u5347\u7ea7",source:"@site/docs/FE/angular/excel/update.md",sourceDirName:"FE/angular/excel",slug:"/FE/angular/excel/update",permalink:"/docs/FE/angular/excel/update",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1713494798,formattedLastUpdatedAt:"Apr 19, 2024",frontMatter:{id:"update",title:"Angular Update"},sidebar:"tutorialSidebar",previous:{title:"update-9.1",permalink:"/docs/FE/angular/excel/update-9.1"},next:{title:"webpack-bundle-analyzer",permalink:"/docs/FE/angular/excel/webpack-bundle-analyzer"}},d={},o=[{value:"Angular \u7248\u672c\u5347\u7ea7",id:"angular-\u7248\u672c\u5347\u7ea7",level:3},{value:"before",id:"before",level:6},{value:"after",id:"after",level:6},{value:"Update to Angular 9",id:"update-to-angular-9",level:3}];function i(n){const e={a:"a",blockquote:"blockquote",code:"code",del:"del",h3:"h3",h6:"h6",hr:"hr",p:"p",pre:"pre",...(0,l.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:"angular-\u7248\u672c\u5347\u7ea7",children:"Angular \u7248\u672c\u5347\u7ea7"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u7248\u672c\u53f7"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"@angular typescript \u7248\u672c\u56fa\u5b9a \u7248\u672c\u53f7\u5199\u6b7b \u5927\u7248\u672c\u7edf\u4e00\u5347\u7ea7"}),"\n",(0,s.jsx)(e.p,{children:"\u7b2c\u4e09\u65b9\u7ec4\u4ef6 \u91c7\u7528 ~ \u5982\u9700\u5347\u7ea7\u3001\u6dfb\u52a0\u65b0\u7279\u6027\uff0c\u624b\u52a8\u66f4\u6539 package.json"}),"\n",(0,s.jsx)(e.p,{children:"\u81ea\u5df1\u5f00\u53d1\u7684\u7ec4\u4ef6 \u7248\u672c\u53f7\u5199\u6b7b \u9632\u6b62\u6709\u6d4b\u8bd5\u7248\u672c\u5f71\u54cd\u529f\u80fd"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u66f4\u65b0\u5230 8.0"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://update.angular.io/#7.2:8.0",children:"https://update.angular.io/#7.2:8.0"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://ng-alain.com/docs/upgrade-v8/zh",children:"https://ng-alain.com/docs/upgrade-v8/zh"})}),"\n",(0,s.jsx)(e.p,{children:"Angular now uses TypeScript 3.4"}),"\n",(0,s.jsxs)(e.p,{children:["\u5148\u5728 ",(0,s.jsx)(e.code,{children:"package.josn"})," \u4e2d\u6682\u65f6\u79fb\u9664 ",(0,s.jsx)(e.code,{children:"@bss/keycloak-auth"})," ",(0,s.jsx)(e.code,{children:"@bss/layout"})]}),"\n",(0,s.jsx)(e.p,{children:"\u518d\u5347\u7ea7 typescript \u548c angular"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"yarn upgrade typescript@~3.4.5\nng update @angular/cli @angular/core\n"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"AntDesign"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ng update ng-zorro-antd\n### \u82e5\u591a\u6b21\u5c1d\u8bd5\u540e\u4ecd\u5931\u8d25\uff0c\u5219\u76f4\u63a5\u6267\u884c\nyarn update ng-zorro-antd\n"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"HttpModule"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["If you use the legacy ",(0,s.jsx)(e.code,{children:"HttpModule"})," and the ",(0,s.jsx)(e.code,{children:"Http"})," service, switch to ",(0,s.jsx)(e.code,{children:"HttpClientModule"})," and the ",(0,s.jsx)(e.code,{children:"HttpClient"})," service."]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u8def\u7531\u61d2\u52a0\u8f7d"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["(1) ",(0,s.jsx)(e.code,{children:"tsconfig.json"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'   "module": "es2015",\n\u66ff\u6362\u4e3a\n   "module": "esnext",\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://stackoverflow.com/questions/56375703/angular-8-lazy-loading-modules-error-ts1323-dynamic-import-is-only-supporte",children:"https://stackoverflow.com/questions/56375703/angular-8-lazy-loading-modules-error-ts1323-dynamic-import-is-only-supporte"})}),"\n",(0,s.jsxs)(e.p,{children:["(2)",(0,s.jsx)(e.code,{children:"routes-routing.module.ts"})]}),"\n",(0,s.jsx)(e.p,{children:"\u7531"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"      {\n        path: 'general',\n        loadChildren: './general-quota/general-quota.module#GeneralQuotaModule',\n      },\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u66ff\u6362\u4e3a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"{\n  path: 'admin',\n  loadChildren: () => import('./admin/admin.module').then(mod => mod.AdminModule),\n},\n"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5dee\u5f02\u5316\u52a0\u8f7d"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://angular.cn/guide/deployment#differential-loading",children:"https://angular.cn/guide/deployment#differential-loading"})}),"\n",(0,s.jsx)(e.p,{children:"\u65b0\u5efa browserslist \u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"browserslist"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"> 0.5%\nlast 2 versions\nFirefox ESR\nnot dead\nnot IE 9-11 # For IE 9-11 support, remove 'not'.\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"tsconfig.json"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'    "target": "es5",\n\u66ff\u6362\u4e3a\n    "target": "es2015",\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u79fb\u9664 ",(0,s.jsx)(e.code,{children:"package.json"})," \u4e2d\u7684 ",(0,s.jsx)(e.code,{children:"core-js"})]}),"\n",(0,s.jsxs)(e.p,{children:["\u79fb\u9664 ",(0,s.jsx)(e.code,{children:"src\\polyfills.ts"})," \u4e2d\u5bf9 ",(0,s.jsx)(e.code,{children:"core-js"})," \u7684\u5f15\u7528"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"tsconfig.json"})}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u539f src/tsconfig.app.json\u3001src/tsconfig.spec.json\u3001karma.conf.js \u8f6c\u79fb\u81f3\u6839\u76ee\u5f55\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 ",(0,s.jsx)(e.code,{children:"angular.json"})," \u76f8\u5bf9\u5e94\u8def\u5f84"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"tsconfig.app.json"})," \u548c ",(0,s.jsx)(e.code,{children:"tsconfig.spec.json"})," \u65e0\u987b\u518d\u5355\u72ec\u8bbe\u5b9a ",(0,s.jsx)(e.code,{children:"paths"})," \u5c5e\u6027"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"tsconfig.app.json"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "extends": "./tsconfig.json",\n  "compilerOptions": {\n    "outDir": "./out-tsc/app",\n    "types": []\n  },\n  "include": ["src/**/*.ts"],\n  "exclude": ["src/test.ts", "src/**/*.spec.ts"]\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.del,{children:"Ivy"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://angular.cn/guide/ivy",children:"https://angular.cn/guide/ivy"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://tc9011.com/2018/11/30/ivy-angular%E4%B8%8B%E4%B8%80%E4%BB%A3%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/",children:"https://tc9011.com/2018/11/30/ivy-angular%E4%B8%8B%E4%B8%80%E4%BB%A3%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"tsconfig.app.json"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'  "angularCompilerOptions": {\n    "enableIvy": true\n  },\n'})}),"\n",(0,s.jsxs)(e.p,{children:["ng-zorro-antd \u6682\u4e0d\u652f\u6301 ivy ",(0,s.jsx)(e.code,{children:"2019.7.18"})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://github.com/NG-ZORRO/ng-zorro-antd/issues/3667",children:"https://github.com/NG-ZORRO/ng-zorro-antd/issues/3667"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ERROR in Cannot combine @Input decorators with query decorators\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://stackoverflow.com/questions/56457566/cannot-combine-input-decorators-with-query-decorators-using-ivy",children:"https://stackoverflow.com/questions/56457566/cannot-combine-input-decorators-with-query-decorators-using-ivy"})}),"\n",(0,s.jsx)(e.h6,{id:"before",children:"before"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"$ ls -lh dist/ng-admin/\ntotal 1.5M\n-rw-r--r-- 1 luanxingtong 1049089 103K 7\u6708  17 18:20 3-es5.f5ffa042a03f73da649e.js\n-rw-r--r-- 1 luanxingtong 1049089  26K 7\u6708  17 18:20 3rdpartylicenses.txt\n-rw-r--r-- 1 luanxingtong 1049089 102K 7\u6708  17 18:18 4-es2015.9de6d911fbf9dd41b0d7.js\n-rw-r--r-- 1 luanxingtong 1049089 111K 7\u6708  17 18:20 4-es5.358c2402a8d83d9a63ad.js\n-rw-r--r-- 1 luanxingtong 1049089 110K 7\u6708  17 18:18 5-es2015.429a778af1180bc17ae5.js\ndrwxr-xr-x 1 luanxingtong 1049089    0 7\u6708  17 18:18 assets\n-rw-r--r-- 1 luanxingtong 1049089 4.2K 7\u6708  17 18:18 favicon.ico\n-rw-r--r-- 1 luanxingtong 1049089  816 7\u6708  17 18:20 index.html\n-rw-r--r-- 1 luanxingtong 1049089 1.1M 7\u6708  17 18:18 main-es2015.22cbc73e30c8958a4388.js\n-rw-r--r-- 1 luanxingtong 1049089 1.2M 7\u6708  17 18:20 main-es5.2623547881b677385254.js\n-rw-r--r-- 1 luanxingtong 1049089  37K 7\u6708  17 18:18 polyfills-es2015.41107f92564c13835b7f.js\n-rw-r--r-- 1 luanxingtong 1049089 113K 7\u6708  17 18:20 polyfills-es5.8a5e301684c48940b412.js\n-rw-r--r-- 1 luanxingtong 1049089 2.3K 7\u6708  17 18:18 runtime-es2015.2184947d7e0de912c4b6.js\n-rw-r--r-- 1 luanxingtong 1049089 2.3K 7\u6708  17 18:20 runtime-es5.32f8465ceff8d22a2bdc.js\n-rw-r--r-- 1 luanxingtong 1049089 414K 7\u6708  17 18:18 styles.90a54e8b9f3d5563f19c.css\n"})}),"\n",(0,s.jsx)(e.h6,{id:"after",children:"after"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"-\n"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5143\u7f16\u7a0b"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://github.com/AngularInDepth/angularindepth/blob/master/articles/nrwl-1.%5B%E7%BF%BB%E8%AF%91%5D-Angular-Ivy-%E4%B8%8E%E5%85%83%E7%BC%96%E7%A8%8B%2C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%E5%92%8C%E6%B7%B7%E5%85%A5.md",children:"https://github.com/AngularInDepth/angularindepth/blob/master/articles/nrwl-1.%5B%E7%BF%BB%E8%AF%91%5D-Angular-Ivy-%E4%B8%8E%E5%85%83%E7%BC%96%E7%A8%8B%2C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%E5%92%8C%E6%B7%B7%E5%85%A5.md"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"update-to-angular-9",children:"Update to Angular 9"})]})}function h(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(i,{...n})}):i(n)}},1151:(n,e,r)=>{r.d(e,{Z:()=>c,a:()=>t});var s=r(7294);const l={},a=s.createContext(l);function t(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);