"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5701],{1040:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return u}});var r=t(3117),a=t(102),s=(t(7294),t(3905)),i=["components"],l={id:"single-spa",title:"Single-SPA"},p=void 0,o={unversionedId:"FE/brower/single-spa",id:"FE/brower/single-spa",title:"Single-SPA",description:"Single-SPA",source:"@site/docs/FE/brower/Single-SPA.md",sourceDirName:"FE/brower",slug:"/FE/brower/single-spa",permalink:"/docs/FE/brower/single-spa",draft:!1,tags:[],version:"current",lastUpdatedAt:1581911329,formattedLastUpdatedAt:"Feb 17, 2020",frontMatter:{id:"single-spa",title:"Single-SPA"},sidebar:"tutorialSidebar",previous:{title:"ServiceWorkers",permalink:"/docs/FE/brower/ServiceWorkers"},next:{title:"WebAssembly",permalink:"/docs/FE/brower/WebAssembly"}},c={},u=[{value:"Single-SPA",id:"single-spa",level:4},{value:"https://single-spa.surge.sh/",id:"httpssingle-spasurgesh",level:4},{value:"Demo",id:"demo",level:4},{value:"\u521b\u5efa angular \u9879\u76ee",id:"\u521b\u5efa-angular-\u9879\u76ee",level:4},{value:"\u5728 angular \u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6",id:"\u5728-angular-\u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6",level:4},{value:"\u914d\u7f6e\u8def\u7531",id:"\u914d\u7f6e\u8def\u7531",level:4},{value:"\u542f\u52a8\u9879\u76ee",id:"\u542f\u52a8\u9879\u76ee",level:4}],m={toc:u};function d(e){var n=e.components,t=(0,a.Z)(e,i);return(0,s.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h4",{id:"single-spa"},"Single-SPA"),(0,s.kt)("h4",{id:"httpssingle-spasurgesh"},(0,s.kt)("a",{parentName:"h4",href:"https://single-spa.surge.sh/"},"https://single-spa.surge.sh/")),(0,s.kt)("h4",{id:"demo"},"Demo"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://alili.tech/archive/22975f44/"},"https://alili.tech/archive/22975f44/")),(0,s.kt)("h4",{id:"\u521b\u5efa-angular-\u9879\u76ee"},"\u521b\u5efa angular \u9879\u76ee"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"### \u521b\u5efaangular\u9879\u76ee\uff0c\u6ce8\u610f\u914d\u7f6e--prefix\uff0c\u5426\u5219\u8981\u66f4\u6539\u4e00\u7cfb\u5217\u6587\u4ef6\nng new my-app --routing --prefix my-app\n### \u6dfb\u52a0single-spa-angular\ncd my-app\nng add single-spa-angular\n### \u5b89\u88c5single-spa-angular\nnpm install --save single-spa-angular\n")),(0,s.kt)("h4",{id:"\u5728-angular-\u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6"},"\u5728 angular \u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"\u5728",(0,s.kt)("inlineCode",{parentName:"p"},"app-routing.module.ts"),"\u4e2d\u6dfb\u52a0",(0,s.kt)("inlineCode",{parentName:"p"},"providers: [{ provide: APP_BASE_HREF, useValue: '/' }]"))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"\u5728",(0,s.kt)("inlineCode",{parentName:"p"},"app-routing.module.ts"),"\u4e2d\u6dfb\u52a0",(0,s.kt)("inlineCode",{parentName:"p"},"{ path: '**', component: EmptyRouteComponent }"))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"\u5728",(0,s.kt)("inlineCode",{parentName:"p"},"app.module.ts"),"\u4e2d\u58f0\u660e",(0,s.kt)("inlineCode",{parentName:"p"},"EmptyRouteComponent"))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"\u4fee\u6539",(0,s.kt)("inlineCode",{parentName:"p"},"package.json"),":"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'"start": "npm run serve:single-spa",\n"build": "npm run build:single-spa",\n"build:single-spa": "ng build --prod --deploy-url /dist/navbar --output-hashing none",\n"serve:single-spa": "ng serve --disable-host-check --port 4300 --deploy-url http://localhost:4300/ --live-reload false"\n')),(0,s.kt)("h4",{id:"\u914d\u7f6e\u8def\u7531"},"\u914d\u7f6e\u8def\u7531"),(0,s.kt)("p",null,"\u521b\u5efa",(0,s.kt)("inlineCode",{parentName:"p"},"index.html"),"\uff0c\u5229\u7528 sytemjs \u548c single-spa-config \u914d\u7f6e\u8def\u7531"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta\n      http-equiv="Content-Security-Policy"\n      content="default-src *  data: blob: \'unsafe-inline\' \'unsafe-eval\'; script-src * \'unsafe-inline\' \'unsafe-eval\'; connect-src * \'unsafe-inline\'; img-src * data: blob: \'unsafe-inline\'; frame-src *; style-src * data: blob: \'unsafe-inline\'; font-src * data: blob: \'unsafe-inline\';"\n    />\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <title>Your application</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <meta name="importmap-type" content="systemjs-importmap" />\n    <script type="systemjs-importmap">\n      {\n        "imports": {\n          "app1": "http://localhost:4201/main.js",\n          "app2": "http://localhost:4202/main.js",\n          "navbar": "http://localhost:4300/main.js",\n          "single-spa": "https://cdnjs.cloudflare.com/ajax/libs/single-spa/4.3.5/system/single-spa.min.js"\n        }\n      }\n    <\/script>\n    <link\n      rel="preload"\n      href="https://cdnjs.cloudflare.com/ajax/libs/single-spa/4.3.5/system/single-spa.min.js"\n      as="script"\n      crossorigin="anonymous"\n    />\n    <script src="https://unpkg.com/core-js-bundle@3.1.4/minified.js"><\/script>\n    <script src="https://unpkg.com/zone.js"><\/script>\n    <script src="https://unpkg.com/import-map-overrides@1.6.0/dist/import-map-overrides.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/system.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/amd.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/named-exports.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/named-register.min.js"><\/script>\n  </head>\n\n  <body>\n    <script>\n      System.import("single-spa").then(function(singleSpa) {\n        singleSpa.registerApplication(\n          "navbar",\n          function() {\n            return System.import("navbar");\n          },\n          function(location) {\n            return true;\n          }\n        );\n\n        singleSpa.registerApplication(\n          "app1",\n          function() {\n            return System.import("app1");\n          },\n          function(location) {\n            return location.pathname.startsWith("/app1");\n          }\n        );\n\n        singleSpa.registerApplication(\n          "app2",\n          function() {\n            return System.import("app2");\n          },\n          function(location) {\n            return location.pathname.startsWith("/app2");\n          }\n        );\n\n        singleSpa.start();\n      });\n    <\/script>\n    <import-map-overrides-full></import-map-overrides-full>\n  </body>\n</html>\n')),(0,s.kt)("h4",{id:"\u542f\u52a8\u9879\u76ee"},"\u542f\u52a8\u9879\u76ee"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"\u521b\u5efaindex.html,\u5229\u7528systemjs\u548csingle-spa-config\u914d\u7f6e\u8def\u7531\n### \u521b\u5efapacket.json\u6587\u4ef6\nnpm init\n### \u5b89\u88c5serve\u6587\u4ef6\nnpm install serve\n### \u8bbe\u7f6e\u7aef\u53e3\n\u5728packet.json/scripts\u4e0b\u5199\u5165start\uff1aserve -s -l 8080(\u7aef\u53e3\u53f7)\n### \u5b89\u88c5\u5e76\u542f\u52a8\nnpm install && npm start\n### \u5728\u5f53\u524d\u914d\u7f6e\u4e0b\u9700\u8981\u5206\u522b\u542f\u52a8\u5404\u4e2aangular\u5b50\u9879\u76ee\n")))}d.isMDXComponent=!0},3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),o=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=o(e.components);return r.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=o(t),d=a,g=m["".concat(p,".").concat(d)]||m[d]||u[d]||s;return t?r.createElement(g,i(i({ref:n},c),{},{components:t})):r.createElement(g,i({ref:n},c))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,i=new Array(s);i[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var o=2;o<s;o++)i[o]=t[o];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);