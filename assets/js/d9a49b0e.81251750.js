"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6795],{9055:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return p},metadata:function(){return i},toc:function(){return c}});var a=t(3117),r=t(102),l=(t(7294),t(3905)),o=["components"],p={id:"update",title:"Angular Update"},u=void 0,i={unversionedId:"FE/angular/excel/update",id:"FE/angular/excel/update",title:"Angular Update",description:"Angular \u7248\u672c\u5347\u7ea7",source:"@site/docs/FE/angular/excel/update.md",sourceDirName:"FE/angular/excel",slug:"/FE/angular/excel/update",permalink:"/docs/FE/angular/excel/update",draft:!1,tags:[],version:"current",lastUpdatedAt:1591790314,formattedLastUpdatedAt:"Jun 10, 2020",frontMatter:{id:"update",title:"Angular Update"},sidebar:"tutorialSidebar",previous:{title:"update-9.1",permalink:"/docs/FE/angular/excel/update-9.1"},next:{title:"webpack-bundle-analyzer",permalink:"/docs/FE/angular/excel/webpack-bundle-analyzer"}},s={},c=[{value:"Angular \u7248\u672c\u5347\u7ea7",id:"angular-\u7248\u672c\u5347\u7ea7",level:3},{value:"before",id:"before",level:6},{value:"after",id:"after",level:6},{value:"Update to Angular 9",id:"update-to-angular-9",level:3}],d={toc:c};function g(e){var n=e.components,t=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h3",{id:"angular-\u7248\u672c\u5347\u7ea7"},"Angular \u7248\u672c\u5347\u7ea7"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u7248\u672c\u53f7")),(0,l.kt)("p",null,"@angular typescript \u7248\u672c\u56fa\u5b9a \u7248\u672c\u53f7\u5199\u6b7b \u5927\u7248\u672c\u7edf\u4e00\u5347\u7ea7"),(0,l.kt)("p",null,"\u7b2c\u4e09\u65b9\u7ec4\u4ef6 \u91c7\u7528 ~ \u5982\u9700\u5347\u7ea7\u3001\u6dfb\u52a0\u65b0\u7279\u6027\uff0c\u624b\u52a8\u66f4\u6539 package.json"),(0,l.kt)("p",null,"\u81ea\u5df1\u5f00\u53d1\u7684\u7ec4\u4ef6 \u7248\u672c\u53f7\u5199\u6b7b \u9632\u6b62\u6709\u6d4b\u8bd5\u7248\u672c\u5f71\u54cd\u529f\u80fd"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u66f4\u65b0\u5230 8.0")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://update.angular.io/#7.2:8.0"},"https://update.angular.io/#7.2:8.0")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://ng-alain.com/docs/upgrade-v8/zh"},"https://ng-alain.com/docs/upgrade-v8/zh")),(0,l.kt)("p",null,"Angular now uses TypeScript 3.4"),(0,l.kt)("p",null,"\u5148\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.josn")," \u4e2d\u6682\u65f6\u79fb\u9664 ",(0,l.kt)("inlineCode",{parentName:"p"},"@bss/keycloak-auth")," ",(0,l.kt)("inlineCode",{parentName:"p"},"@bss/layout")),(0,l.kt)("p",null,"\u518d\u5347\u7ea7 typescript \u548c angular"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yarn upgrade typescript@~3.4.5\nng update @angular/cli @angular/core\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"AntDesign")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ng update ng-zorro-antd\n### \u82e5\u591a\u6b21\u5c1d\u8bd5\u540e\u4ecd\u5931\u8d25\uff0c\u5219\u76f4\u63a5\u6267\u884c\nyarn update ng-zorro-antd\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"HttpModule")),(0,l.kt)("p",null,"If you use the legacy ",(0,l.kt)("inlineCode",{parentName:"p"},"HttpModule")," and the ",(0,l.kt)("inlineCode",{parentName:"p"},"Http")," service, switch to ",(0,l.kt)("inlineCode",{parentName:"p"},"HttpClientModule")," and the ",(0,l.kt)("inlineCode",{parentName:"p"},"HttpClient")," service."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u8def\u7531\u61d2\u52a0\u8f7d")),(0,l.kt)("p",null,"(1) ",(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'   "module": "es2015",\n\u66ff\u6362\u4e3a\n   "module": "esnext",\n')),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/56375703/angular-8-lazy-loading-modules-error-ts1323-dynamic-import-is-only-supporte"},"https://stackoverflow.com/questions/56375703/angular-8-lazy-loading-modules-error-ts1323-dynamic-import-is-only-supporte")),(0,l.kt)("p",null,"(2)",(0,l.kt)("inlineCode",{parentName:"p"},"routes-routing.module.ts")),(0,l.kt)("p",null,"\u7531"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"      {\n        path: 'general',\n        loadChildren: './general-quota/general-quota.module#GeneralQuotaModule',\n      },\n")),(0,l.kt)("p",null,"\u66ff\u6362\u4e3a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"{\n  path: 'admin',\n  loadChildren: () => import('./admin/admin.module').then(mod => mod.AdminModule),\n},\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5dee\u5f02\u5316\u52a0\u8f7d")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://angular.cn/guide/deployment#differential-loading"},"https://angular.cn/guide/deployment#differential-loading")),(0,l.kt)("p",null,"\u65b0\u5efa browserslist \u6587\u4ef6"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"browserslist")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> 0.5%\nlast 2 versions\nFirefox ESR\nnot dead\nnot IE 9-11 # For IE 9-11 support, remove 'not'.\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'    "target": "es5",\n\u66ff\u6362\u4e3a\n    "target": "es2015",\n')),(0,l.kt)("p",null,"\u79fb\u9664 ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json")," \u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"core-js")),(0,l.kt)("p",null,"\u79fb\u9664 ",(0,l.kt)("inlineCode",{parentName:"p"},"src\\polyfills.ts")," \u4e2d\u5bf9 ",(0,l.kt)("inlineCode",{parentName:"p"},"core-js")," \u7684\u5f15\u7528"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.json"))),(0,l.kt)("p",null,"\u539f src/tsconfig.app.json\u3001src/tsconfig.spec.json\u3001karma.conf.js \u8f6c\u79fb\u81f3\u6839\u76ee\u5f55\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 ",(0,l.kt)("inlineCode",{parentName:"p"},"angular.json")," \u76f8\u5bf9\u5e94\u8def\u5f84"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.app.json")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.spec.json")," \u65e0\u987b\u518d\u5355\u72ec\u8bbe\u5b9a ",(0,l.kt)("inlineCode",{parentName:"p"},"paths")," \u5c5e\u6027"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.app.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "extends": "./tsconfig.json",\n  "compilerOptions": {\n    "outDir": "./out-tsc/app",\n    "types": []\n  },\n  "include": ["src/**/*.ts"],\n  "exclude": ["src/test.ts", "src/**/*.spec.ts"]\n}\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("del",{parentName:"p"},"Ivy"))),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://angular.cn/guide/ivy"},"https://angular.cn/guide/ivy")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://tc9011.com/2018/11/30/ivy-angular%E4%B8%8B%E4%B8%80%E4%BB%A3%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/"},"https://tc9011.com/2018/11/30/ivy-angular%E4%B8%8B%E4%B8%80%E4%BB%A3%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"tsconfig.app.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'  "angularCompilerOptions": {\n    "enableIvy": true\n  },\n')),(0,l.kt)("p",null,"ng-zorro-antd \u6682\u4e0d\u652f\u6301 ivy ",(0,l.kt)("inlineCode",{parentName:"p"},"2019.7.18")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/NG-ZORRO/ng-zorro-antd/issues/3667"},"https://github.com/NG-ZORRO/ng-zorro-antd/issues/3667")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ERROR in Cannot combine @Input decorators with query decorators\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/56457566/cannot-combine-input-decorators-with-query-decorators-using-ivy"},"https://stackoverflow.com/questions/56457566/cannot-combine-input-decorators-with-query-decorators-using-ivy")),(0,l.kt)("h6",{id:"before"},"before"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ ls -lh dist/ng-admin/\ntotal 1.5M\n-rw-r--r-- 1 luanxingtong 1049089 103K 7\u6708  17 18:20 3-es5.f5ffa042a03f73da649e.js\n-rw-r--r-- 1 luanxingtong 1049089  26K 7\u6708  17 18:20 3rdpartylicenses.txt\n-rw-r--r-- 1 luanxingtong 1049089 102K 7\u6708  17 18:18 4-es2015.9de6d911fbf9dd41b0d7.js\n-rw-r--r-- 1 luanxingtong 1049089 111K 7\u6708  17 18:20 4-es5.358c2402a8d83d9a63ad.js\n-rw-r--r-- 1 luanxingtong 1049089 110K 7\u6708  17 18:18 5-es2015.429a778af1180bc17ae5.js\ndrwxr-xr-x 1 luanxingtong 1049089    0 7\u6708  17 18:18 assets\n-rw-r--r-- 1 luanxingtong 1049089 4.2K 7\u6708  17 18:18 favicon.ico\n-rw-r--r-- 1 luanxingtong 1049089  816 7\u6708  17 18:20 index.html\n-rw-r--r-- 1 luanxingtong 1049089 1.1M 7\u6708  17 18:18 main-es2015.22cbc73e30c8958a4388.js\n-rw-r--r-- 1 luanxingtong 1049089 1.2M 7\u6708  17 18:20 main-es5.2623547881b677385254.js\n-rw-r--r-- 1 luanxingtong 1049089  37K 7\u6708  17 18:18 polyfills-es2015.41107f92564c13835b7f.js\n-rw-r--r-- 1 luanxingtong 1049089 113K 7\u6708  17 18:20 polyfills-es5.8a5e301684c48940b412.js\n-rw-r--r-- 1 luanxingtong 1049089 2.3K 7\u6708  17 18:18 runtime-es2015.2184947d7e0de912c4b6.js\n-rw-r--r-- 1 luanxingtong 1049089 2.3K 7\u6708  17 18:20 runtime-es5.32f8465ceff8d22a2bdc.js\n-rw-r--r-- 1 luanxingtong 1049089 414K 7\u6708  17 18:18 styles.90a54e8b9f3d5563f19c.css\n")),(0,l.kt)("h6",{id:"after"},"after"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"-\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5143\u7f16\u7a0b")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/AngularInDepth/angularindepth/blob/master/articles/nrwl-1.%5B%E7%BF%BB%E8%AF%91%5D-Angular-Ivy-%E4%B8%8E%E5%85%83%E7%BC%96%E7%A8%8B%2C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%E5%92%8C%E6%B7%B7%E5%85%A5.md"},"https://github.com/AngularInDepth/angularindepth/blob/master/articles/nrwl-1.%5B%E7%BF%BB%E8%AF%91%5D-Angular-Ivy-%E4%B8%8E%E5%85%83%E7%BC%96%E7%A8%8B%2C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%E5%92%8C%E6%B7%B7%E5%85%A5.md")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"update-to-angular-9"},"Update to Angular 9"))}g.isMDXComponent=!0},3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return g}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),i=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=i(e.components);return a.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=i(t),g=r,m=d["".concat(u,".").concat(g)]||d[g]||c[g]||l;return t?a.createElement(m,o(o({ref:n},s),{},{components:t})):a.createElement(m,o({ref:n},s))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=d;var p={};for(var u in n)hasOwnProperty.call(n,u)&&(p[u]=n[u]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var i=2;i<l;i++)o[i]=t[i];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);