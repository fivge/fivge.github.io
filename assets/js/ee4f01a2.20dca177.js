"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[70],{1876:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>d});var r=s(5893),l=s(1151);const c={title:"OpenStack\u73af\u5883\u914d\u7f6e"},o=void 0,t={id:"CloudNative/devops/openstack/errors",title:"OpenStack\u73af\u5883\u914d\u7f6e",description:"0x01 \u914d\u7f6e\u7f51\u7edc",source:"@site/docs/CloudNative/devops/openstack/errors.md",sourceDirName:"CloudNative/devops/openstack",slug:"/CloudNative/devops/openstack/errors",permalink:"/docs/CloudNative/devops/openstack/errors",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1714465809,formattedLastUpdatedAt:"Apr 30, 2024",frontMatter:{title:"OpenStack\u73af\u5883\u914d\u7f6e"},sidebar:"tutorialSidebar",previous:{title:"OpenStack",permalink:"/docs/CloudNative/devops/openstack/"},next:{title:"flavor",permalink:"/docs/CloudNative/devops/openstack/\u521b\u5efa\u5b9e\u4f8b/flavor"}},i={},d=[{value:"0x01 \u914d\u7f6e\u7f51\u7edc",id:"0x01-\u914d\u7f6e\u7f51\u7edc",level:3},{value:"0x02 Controller",id:"0x02-controller",level:3},{value:"0x03 Computer",id:"0x03-computer",level:3},{value:"KeyStone",id:"keystone",level:3},{value:"mariadb~~(\u672a\u89e3\u51b3)~~",id:"mariadb\u672a\u89e3\u51b3",level:3},{value:"Glance",id:"glance",level:3},{value:"NOVA",id:"nova",level:3},{value:"mongo",id:"mongo",level:3},{value:"free -m",id:"free--m",level:3},{value:"Network",id:"network",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",del:"del",em:"em",h3:"h3",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"0x01-\u914d\u7f6e\u7f51\u7edc",children:"0x01 \u914d\u7f6e\u7f51\u7edc"}),"\n",(0,r.jsx)(n.p,{children:"\u914d\u7f6e\u4e24\u4e2a\u7f51\u7edc,\u4e00\u4e2a\u662f\u7ba1\u7406\u7f51\u7edc 10.0.0.0/24,\u53e6\u4e00\u4e2a\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc."}),"\n",(0,r.jsxs)(n.p,{children:["\u914d\u7f6e hosts,",(0,r.jsx)(n.code,{children:"/etc/hosts"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# controller\n10.0.0.11       controller\n\n# compute1\n10.0.0.31       compute1\n\n# .....\n"})}),"\n",(0,r.jsx)(n.h3,{id:"0x02-controller",children:"0x02 Controller"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u7f51\u7edc\u65f6\u95f4\u534f\u8bae(NAT)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4f60\u5e94\u8be5\u5b89\u88c5 Chrony\uff0c\u4e00\u4e2a\u5728\u4e0d\u540c\u8282\u70b9\u540c\u6b65\u670d\u52a1\u5b9e\u73b0 :term:[",(0,r.jsx)(n.code,{children:"](https://docs.openstack.org/mitaka/zh_CN/install-guide-ubuntu/environment-ntp.html#id1)NTP"}),"\u7684\u65b9\u6848\u3002\u6211\u4eec\u5efa\u8bae\u4f60\u914d\u7f6e\u63a7\u5236\u5668\u8282\u70b9\u5f15\u7528\u66f4\u51c6\u786e\u7684(lower stratum)NTP \u670d\u52a1\u5668\uff0c\u7136\u540e\u5176\u4ed6\u8282\u70b9\u5f15\u7528\u63a7\u5236\u8282\u70b9\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt-get install chrony\nvim /etc/chrony/chrony.conf\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"server NTP_SERVER iburst\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 NTP \u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u6216\u8005 IP \u5730\u5740\u66ff\u6362 ",(0,r.jsx)(n.code,{children:"NTP_SERVER"})," \u3002\u914d\u7f6e\u652f\u6301\u8bbe\u7f6e\u591a\u4e2a ",(0,r.jsx)(n.code,{children:"server"})," \u503c\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u63a7\u5236\u8282\u70b9\u9ed8\u8ba4\u8ddf\u516c\u5171\u670d\u52a1\u5668\u6c60\u540c\u6b65\u65f6\u95f4\u3002\u4f46\u662f\u4f60\u4e5f\u53ef\u4ee5\u9009\u62e9\u6027\u914d\u7f6e\u5176\u4ed6\u670d\u52a1\u5668\uff0c\u6bd4\u5982\u4f60\u7ec4\u7ec7\u4e2d\u63d0\u4f9b\u7684\u670d\u52a1\u5668\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:" service chrony restart\n"})}),"\n",(0,r.jsx)(n.h3,{id:"0x03-computer",children:"0x03 Computer"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u7f51\u7edc\u65f6\u95f4\u534f\u8bae(NAT)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"http://www.pool.ntp.org/zone/cn",children:"http://www.pool.ntp.org/zone/cn"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"apt-get install chrony\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7f16\u8f91",(0,r.jsx)(n.code,{children:"/etc/chrony/chrony.conf"})," \u6587\u4ef6\u5e76\u6ce8\u91ca\u9664",(0,r.jsx)(n.code,{children:"server"})," \u503c\u5916\u7684\u6240\u6709\u5185\u5bb9\u3002\u4fee\u6539\u5b83\u5f15\u7528\u63a7\u5236\u8282\u70b9\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"server controller iburst\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542f NTP \u670d\u52a1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# service chrony restart\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u7ee7\u7eed\u8fdb\u4e00\u6b65\u7684\u64cd\u4f5c\u4e4b\u524d\u9a8c\u8bc1 NTP \u7684\u540c\u6b65\u3002\u6709\u4e9b\u8282\u70b9\uff0c\u7279\u522b\u662f\u54ea\u4e9b\u5f15\u7528\u4e86\u63a7\u5236\u8282\u70b9\u7684\uff0c\u9700\u8981\u82b1\u8d39\u4e00\u4e9b\u65f6\u95f4\u53bb\u540c\u6b65\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9a8c\u8bc1"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5728\u63a7\u5236\u8282\u70b9\u4e0a\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# chronyc sources\n  210 Number of sources = 2\n  MS Name/IP address         Stratum Poll Reach LastRx Last sample\n  ===============================================================================\n  ^- 192.0.2.11                    2   7    12   137  -2814us[-3000us] +/-   43ms\n  ^* 192.0.2.12                    2   6   177    46    +17us[  -23us] +/-   68ms\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.em,{children:"Name/IP address"})," \u5217\u7684\u5185\u5bb9\u5e94\u663e\u793a NTP \u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u6216\u8005 IP \u5730\u5740\u3002\u5728 ",(0,r.jsx)(n.em,{children:"S"})," \u5217\u7684\u5185\u5bb9\u5e94\u8be5\u5728 NTP \u670d\u52a1\u76ee\u524d\u540c\u6b65\u7684\u4e0a\u6e38\u670d\u52a1\u5668\u524d\u663e\u793a ***\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5728\u6240\u6709\u5176\u4ed6\u8282\u70b9\u6267\u884c\u76f8\u540c\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# chronyc sources\n  210 Number of sources = 1\n  MS Name/IP address         Stratum Poll Reach LastRx Last sample\n  ===============================================================================\n  ^* controller                    3    9   377   421    +15us[  -87us] +/-   15ms\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.em,{children:"Name/IP address"})," \u5217\u7684\u5185\u5bb9\u5e94\u663e\u793a\u63a7\u5236\u8282\u70b9\u7684\u4e3b\u673a\u540d\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"keystone",children:"KeyStone"}),"\n",(0,r.jsx)(n.p,{children:"\u6570\u636e\u5e93\u8bbe\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u540c\u6b65 nova / keystone \u6570\u636e\u5e93\u65f6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"ALTER SCHEMA keystone DEFAULT CHARACTER SET utf8 ;\n"})}),"\n",(0,r.jsx)(n.p,{children:"flush privileges"}),"\n",(0,r.jsx)(n.h3,{id:"mariadb\u672a\u89e3\u51b3",children:"mariadb~~(\u672a\u89e3\u51b3)~~"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.del,{children:["computer \u65e0\u6cd5\u8fde\u63a5 controller \u7684",(0,r.jsx)(n.code,{children:"3306"}),"\u7aef\u53e3"]})}),"\n",(0,r.jsx)(n.h3,{id:"glance",children:"Glance"}),"\n",(0,r.jsx)(n.p,{children:"\u955c\u50cf\u670d\u52a1"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Caused by: com.rabbitmq.client.AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN. For details see the\n\n\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"nova",children:"NOVA"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","nova-api"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","nova-conductor"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","nova-consoleauth"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","nova-manage"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","nova-novncproxy"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","nova-scheduler"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"rabbitmqctl list_permissions"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"mongo",children:"mongo"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.mongodb.com/manual/reference/method/db.createUser/#create-administrative-user-with-roles",children:"https://docs.mongodb.com/manual/reference/method/db.createUser/#create-administrative-user-with-roles"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'mongo --host controller --eval \'\n  db = db.getSiblingDB("ceilometer");\n  db.addUser({user: "ceilometer",\n  pwd: "1234",\n  roles: [ "readWrite", "dbAdmin" ]})\'\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"to"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'mongo --host controller --eval \'\ndb = db.getSiblingDB("ceilometer");\ndb.createUser({user: "ceilometer",\npwd: "1234",\nroles: [ "readWrite", "dbAdmin" ]})\'\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"\u279c local ll"}),"\n",(0,r.jsx)(n.p,{children:"total 52K"}),"\n",(0,r.jsxs)(n.p,{children:["-rw-rw-r-- 1 root root 0 3 \u6708 20 22:45 ",(0,r.jsx)(n.em,{children:"build_horizon-j0U_ef_horizon-11.0.1_openstack_dashboard_local"}),".secret_key_store.lock"]}),"\n",(0,r.jsx)(n.p,{children:"drwxr-xr-x 2 root root 4.0K 7 \u6708 9 19:01 enabled"}),"\n",(0,r.jsxs)(n.p,{children:["-rw-r--r-- 1 root root 0 3 \u6708 11 04:49 ",(0,r.jsx)(n.strong,{children:"init"}),".py"]}),"\n",(0,r.jsxs)(n.p,{children:["-rw-r--r-- 1 root root 155 7 \u6708 9 19:01 ",(0,r.jsx)(n.strong,{children:"init"}),".pyc"]}),"\n",(0,r.jsx)(n.p,{children:"drwxr-xr-x 2 root root 4.0K 7 \u6708 9 18:58 local_settings.d"}),"\n",(0,r.jsx)(n.p,{children:"lrwxrwxrwx 1 root root 42 3 \u6708 20 22:45 local_settings.py -> /etc/openstack-dashboard/local_settings.py"}),"\n",(0,r.jsx)(n.p,{children:"-rw-r--r-- 1 root root 5.5K 7 \u6708 9 19:01 local_settings.pyc"}),"\n",(0,r.jsx)(n.p,{children:"-rw-r--r-- 1 root root 32K 3 \u6708 20 22:45 local_settings.py.example"}),"\n",(0,r.jsx)(n.p,{children:"\u279c local"}),"\n",(0,r.jsx)(n.p,{children:"\u279c local pwd"}),"\n",(0,r.jsx)(n.p,{children:"/usr/share/openstack-dashboard/openstack_dashboard/local"}),"\n",(0,r.jsx)(n.p,{children:"\u279c local ls"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"build_horizon-j0U_ef_horizon-11.0.1_openstack_dashboard_local"}),".secret_key_store.lock ",(0,r.jsx)(n.strong,{children:"init"}),".py local_settings.d local_settings.pyc"]}),"\n",(0,r.jsxs)(n.p,{children:["enabled ",(0,r.jsx)(n.strong,{children:"init"}),".pyc local_settings.py local_settings.py.example"]}),"\n",(0,r.jsxs)(n.p,{children:["\u279c local rm -rf ",(0,r.jsx)(n.em,{children:"build_horizon-j0U_ef_horizon-11.0.1_openstack_dashboard_local"}),".secret_key_store.lock"]}),"\n",(0,r.jsx)(n.p,{children:"\u279c local ls"}),"\n",(0,r.jsxs)(n.p,{children:["enabled ",(0,r.jsx)(n.strong,{children:"init"}),".py ",(0,r.jsx)(n.strong,{children:"init"}),".pyc local_settings.d local_settings.py local_settings.pyc local_settings.py.example"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"\u8bbf\u95ee controller/horizon \u51fa\u9519 500\uff1ainternal server error"}),"\n",(0,r.jsx)(n.p,{children:"\u8bbf\u95ee controller/horizon \u51fa\u9519 504\uff1ainternal server error gateway timeout"}),"\n",(0,r.jsx)(n.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WSGIApplicationGroup %{GLOBAL}\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u628a\u4e0a\u9762\u8fd9\u884c\u6dfb\u52a0\u5230/etc/apache2/conf-available/openstack-dashboard.conf"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"free--m",children:"free -m"}),"\n",(0,r.jsx)(n.p,{children:"ps auxw|head -1;ps auxw|sort -rn -k4|head -20"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ps auxw|head -1;ps auxw|sort -rn -k4|head -20\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"network",children:"Network"}),"\n",(0,r.jsx)(n.p,{children:"\u63a7\u5236\u8282\u70b9\u4e0e\u8ba1\u7b97\u8282\u70b9\u7684\u7f51\u7edc\u65e0\u6cd5\u8fde\u63a5"}),"\n",(0,r.jsx)(n.p,{children:"\u53ea\u6709\u63a7\u5236\u8282\u70b9\u7684\u4ee3\u7406"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"openstack image list\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>t,a:()=>o});var r=s(7294);const l={},c=r.createContext(l);function o(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);