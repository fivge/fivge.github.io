"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5701],{4e3:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=s(5893),i=s(1151);const a={id:"single-spa",title:"Single-SPA"},r=void 0,l={id:"FE/brower/single-spa",title:"Single-SPA",description:"Single-SPA",source:"@site/docs/FE/brower/Single-SPA.md",sourceDirName:"FE/brower",slug:"/FE/brower/single-spa",permalink:"/docs/FE/brower/single-spa",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1727625266e3,frontMatter:{id:"single-spa",title:"Single-SPA"},sidebar:"tutorialSidebar",previous:{title:"ServiceWorkers",permalink:"/docs/FE/brower/ServiceWorkers"},next:{title:"WebAssembly",permalink:"/docs/FE/brower/WebAssembly"}},p={},c=[{value:"Single-SPA",id:"single-spa",level:4},{value:"https://single-spa.surge.sh/",id:"httpssingle-spasurgesh",level:4},{value:"Demo",id:"demo",level:4},{value:"\u521b\u5efa angular \u9879\u76ee",id:"\u521b\u5efa-angular-\u9879\u76ee",level:4},{value:"\u5728 angular \u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6",id:"\u5728-angular-\u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6",level:4},{value:"\u914d\u7f6e\u8def\u7531",id:"\u914d\u7f6e\u8def\u7531",level:4},{value:"\u542f\u52a8\u9879\u76ee",id:"\u542f\u52a8\u9879\u76ee",level:4}];function o(n){const e={a:"a",code:"code",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h4,{id:"single-spa",children:"Single-SPA"}),"\n",(0,t.jsx)(e.h4,{id:"httpssingle-spasurgesh",children:(0,t.jsx)(e.a,{href:"https://single-spa.surge.sh/",children:"https://single-spa.surge.sh/"})}),"\n",(0,t.jsx)(e.h4,{id:"demo",children:"Demo"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:"https://alili.tech/archive/22975f44/",children:"https://alili.tech/archive/22975f44/"})}),"\n",(0,t.jsx)(e.h4,{id:"\u521b\u5efa-angular-\u9879\u76ee",children:"\u521b\u5efa angular \u9879\u76ee"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"### \u521b\u5efaangular\u9879\u76ee\uff0c\u6ce8\u610f\u914d\u7f6e--prefix\uff0c\u5426\u5219\u8981\u66f4\u6539\u4e00\u7cfb\u5217\u6587\u4ef6\nng new my-app --routing --prefix my-app\n### \u6dfb\u52a0single-spa-angular\ncd my-app\nng add single-spa-angular\n### \u5b89\u88c5single-spa-angular\nnpm install --save single-spa-angular\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u5728-angular-\u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6",children:"\u5728 angular \u9879\u76ee\u4e2d\u914d\u7f6e\u76f8\u5173\u6587\u4ef6"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u5728",(0,t.jsx)(e.code,{children:"app-routing.module.ts"}),"\u4e2d\u6dfb\u52a0",(0,t.jsx)(e.code,{children:"providers: [{ provide: APP_BASE_HREF, useValue: '/' }]"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u5728",(0,t.jsx)(e.code,{children:"app-routing.module.ts"}),"\u4e2d\u6dfb\u52a0",(0,t.jsx)(e.code,{children:"{ path: '**', component: EmptyRouteComponent }"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u5728",(0,t.jsx)(e.code,{children:"app.module.ts"}),"\u4e2d\u58f0\u660e",(0,t.jsx)(e.code,{children:"EmptyRouteComponent"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u4fee\u6539",(0,t.jsx)(e.code,{children:"package.json"}),":"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'"start": "npm run serve:single-spa",\n"build": "npm run build:single-spa",\n"build:single-spa": "ng build --prod --deploy-url /dist/navbar --output-hashing none",\n"serve:single-spa": "ng serve --disable-host-check --port 4300 --deploy-url http://localhost:4300/ --live-reload false"\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u914d\u7f6e\u8def\u7531",children:"\u914d\u7f6e\u8def\u7531"}),"\n",(0,t.jsxs)(e.p,{children:["\u521b\u5efa",(0,t.jsx)(e.code,{children:"index.html"}),"\uff0c\u5229\u7528 sytemjs \u548c single-spa-config \u914d\u7f6e\u8def\u7531"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta\n      http-equiv="Content-Security-Policy"\n      content="default-src *  data: blob: \'unsafe-inline\' \'unsafe-eval\'; script-src * \'unsafe-inline\' \'unsafe-eval\'; connect-src * \'unsafe-inline\'; img-src * data: blob: \'unsafe-inline\'; frame-src *; style-src * data: blob: \'unsafe-inline\'; font-src * data: blob: \'unsafe-inline\';"\n    />\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <title>Your application</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <meta name="importmap-type" content="systemjs-importmap" />\n    <script type="systemjs-importmap">\n      {\n        "imports": {\n          "app1": "http://localhost:4201/main.js",\n          "app2": "http://localhost:4202/main.js",\n          "navbar": "http://localhost:4300/main.js",\n          "single-spa": "https://cdnjs.cloudflare.com/ajax/libs/single-spa/4.3.5/system/single-spa.min.js"\n        }\n      }\n    <\/script>\n    <link\n      rel="preload"\n      href="https://cdnjs.cloudflare.com/ajax/libs/single-spa/4.3.5/system/single-spa.min.js"\n      as="script"\n      crossorigin="anonymous"\n    />\n    <script src="https://unpkg.com/core-js-bundle@3.1.4/minified.js"><\/script>\n    <script src="https://unpkg.com/zone.js"><\/script>\n    <script src="https://unpkg.com/import-map-overrides@1.6.0/dist/import-map-overrides.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/system.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/amd.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/named-exports.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/systemjs/4.0.0/extras/named-register.min.js"><\/script>\n  </head>\n\n  <body>\n    <script>\n      System.import("single-spa").then(function(singleSpa) {\n        singleSpa.registerApplication(\n          "navbar",\n          function() {\n            return System.import("navbar");\n          },\n          function(location) {\n            return true;\n          }\n        );\n\n        singleSpa.registerApplication(\n          "app1",\n          function() {\n            return System.import("app1");\n          },\n          function(location) {\n            return location.pathname.startsWith("/app1");\n          }\n        );\n\n        singleSpa.registerApplication(\n          "app2",\n          function() {\n            return System.import("app2");\n          },\n          function(location) {\n            return location.pathname.startsWith("/app2");\n          }\n        );\n\n        singleSpa.start();\n      });\n    <\/script>\n    <import-map-overrides-full></import-map-overrides-full>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u542f\u52a8\u9879\u76ee",children:"\u542f\u52a8\u9879\u76ee"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"\u521b\u5efaindex.html,\u5229\u7528systemjs\u548csingle-spa-config\u914d\u7f6e\u8def\u7531\n### \u521b\u5efapacket.json\u6587\u4ef6\nnpm init\n### \u5b89\u88c5serve\u6587\u4ef6\nnpm install serve\n### \u8bbe\u7f6e\u7aef\u53e3\n\u5728packet.json/scripts\u4e0b\u5199\u5165start\uff1aserve -s -l 8080(\u7aef\u53e3\u53f7)\n### \u5b89\u88c5\u5e76\u542f\u52a8\nnpm install && npm start\n### \u5728\u5f53\u524d\u914d\u7f6e\u4e0b\u9700\u8981\u5206\u522b\u542f\u52a8\u5404\u4e2aangular\u5b50\u9879\u76ee\n"})})]})}function d(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>l,a:()=>r});var t=s(7294);const i={},a=t.createContext(i);function r(n){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);