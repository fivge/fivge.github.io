"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8726],{1470:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>o,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var l=n(5893),c=n(1151);const i={title:"SSL \u8bc1\u4e66"},t=void 0,a={id:"CloudNative/network/ssl",title:"SSL \u8bc1\u4e66",description:"\u4e00\u3001\u7533\u8bf7",source:"@site/docs/CloudNative/network/ssl.md",sourceDirName:"CloudNative/network",slug:"/CloudNative/network/ssl",permalink:"/docs/CloudNative/network/ssl",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1714465809e3,frontMatter:{title:"SSL \u8bc1\u4e66"},sidebar:"tutorialSidebar",previous:{title:"h3-quic",permalink:"/docs/CloudNative/network/http/h3-quic"},next:{title:"Ubuntu disable ipv6",permalink:"/docs/CloudNative/system/Ubuntu-disable-ipv6"}},r={},d=[{value:"\u4e00\u3001\u7533\u8bf7",id:"\u4e00\u7533\u8bf7",level:3},{value:"1. \u5b89\u88c5",id:"1-\u5b89\u88c5",level:4},{value:"2. \u8bbe\u7f6e ca",id:"2-\u8bbe\u7f6e-ca",level:4},{value:"3. \u751f\u6210\u8bc1\u4e66",id:"3-\u751f\u6210\u8bc1\u4e66",level:4},{value:"3.1 http \u65b9\u5f0f",id:"31-http-\u65b9\u5f0f",level:5},{value:"3.2 dns \u65b9\u5f0f",id:"32-dns-\u65b9\u5f0f",level:5},{value:"4. \u5b89\u88c5\u8bc1\u4e66",id:"4-\u5b89\u88c5\u8bc1\u4e66",level:4},{value:"\u4e8c\u3001\u7eed\u671f",id:"\u4e8c\u7eed\u671f",level:3},{value:"1. \u81ea\u52a8\u7eed\u671f",id:"1-\u81ea\u52a8\u7eed\u671f",level:4},{value:"2. \u624b\u52a8\u7eed\u671f",id:"2-\u624b\u52a8\u7eed\u671f",level:4},{value:"\u4e09\u3001\u5176\u4ed6\u914d\u7f6e",id:"\u4e09\u5176\u4ed6\u914d\u7f6e",level:3},{value:"\u56db\u3001\u9a8c\u8bc1",id:"\u56db\u9a8c\u8bc1",level:3}];function h(e){const s={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h3,{id:"\u4e00\u7533\u8bf7",children:"\u4e00\u3001\u7533\u8bf7"}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"certbot(letsencrypt) > acme.sh"}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u4f7f\u7528 acme.sh \u751f\u6210\u3001\u66f4\u65b0\u8bc1\u4e66"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://github.com/acmesh-official/acme.sh",children:"https://github.com/acmesh-official/acme.sh"})}),"\n",(0,l.jsx)(s.h4,{id:"1-\u5b89\u88c5",children:"1. \u5b89\u88c5"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"curl https://get.acme.sh | sh -s email=\n"})}),"\n",(0,l.jsx)(s.h4,{id:"2-\u8bbe\u7f6e-ca",children:"2. \u8bbe\u7f6e ca"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"acme.sh --set-default-ca --server letsencrypt\nacme.sh --set-default-ca --server google\nacme.sh --set-default-ca --server zerossl\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["google ",(0,l.jsx)(s.a,{href:"https://pki.goog/",children:"https://pki.goog/"})]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial",children:"https://cloud.google.com/certificate-manager/docs/public-ca-tutorial"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"zerossl"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"### zerossl\nacme.sh  --register-account  --server zerossl  --eab-kid  xxx --eab-hmac-key xxx\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"3-\u751f\u6210\u8bc1\u4e66",children:"3. \u751f\u6210\u8bc1\u4e66"}),"\n",(0,l.jsx)(s.h5,{id:"31-http-\u65b9\u5f0f",children:"3.1 http \u65b9\u5f0f"}),"\n",(0,l.jsx)(s.p,{children:"http \u65b9\u5f0f\u9700\u8981\u5728\u4f60\u7684\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b\u653e\u7f6e\u4e00\u4e2a\u6587\u4ef6, \u6765\u9a8c\u8bc1\u4f60\u7684\u57df\u540d\u6240\u6709\u6743,\u5b8c\u6210\u9a8c\u8bc1. \u7136\u540e\u5c31\u53ef\u4ee5\u751f\u6210\u8bc1\u4e66\u4e86."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"acme.sh --issue -d example.com -d www.example.com -d xxx.example.com -w /home/wwwroot/example.com\n"})}),"\n",(0,l.jsx)(s.h5,{id:"32-dns-\u65b9\u5f0f",children:"3.2 dns \u65b9\u5f0f"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://github.com/acmesh-official/acme.sh/wiki/dnsapi",children:"https://github.com/acmesh-official/acme.sh/wiki/dnsapi"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"acme.sh --issue --dns dns_cf -d 0x64.in\n\nacme.sh --issue --dns dns_dp -d 0x64.in\n"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u26a0freenom \u6ce8\u518c\u7684\u57df\u540d\u4e0d\u53ef\u4ee5\u7528 cloudflare dns"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://github.com/acmesh-official/acme.sh/issues/2989",children:"https://github.com/acmesh-official/acme.sh/issues/2989"})}),"\n",(0,l.jsx)(s.h4,{id:"4-\u5b89\u88c5\u8bc1\u4e66",children:"4. \u5b89\u88c5\u8bc1\u4e66"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'acme.sh --installcert -d example.com \\\n--key-file xxx \\\n--fullchain-file xxx \\\n--reloadcmd "service nginx force-reload"\n'})}),"\n",(0,l.jsx)(s.h3,{id:"\u4e8c\u7eed\u671f",children:"\u4e8c\u3001\u7eed\u671f"}),"\n",(0,l.jsx)(s.h4,{id:"1-\u81ea\u52a8\u7eed\u671f",children:"1. \u81ea\u52a8\u7eed\u671f"}),"\n",(0,l.jsx)(s.h4,{id:"2-\u624b\u52a8\u7eed\u671f",children:"2. \u624b\u52a8\u7eed\u671f"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"acme.sh --renew -d  example.com\n### \u5f3a\u5236\nacme.sh --renew -d  example.com --force\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u4e09\u5176\u4ed6\u914d\u7f6e",children:"\u4e09\u3001\u5176\u4ed6\u914d\u7f6e"}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\u751f\u6210",(0,l.jsx)(s.code,{children:"\u8fea\u83f2-\u8d6b\u5c14\u66fc\u5bc6\u94a5"}),"\u4ee5\u589e\u5f3a\u5b89\u5168"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell",children:"openssl dhparam -out /etc/ssl/certs/dhparams.pem 2048\n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"nginx \u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://ssl-config.mozilla.org/",children:"https://ssl-config.mozilla.org/"})}),"\n",(0,l.jsx)(s.h3,{id:"\u56db\u9a8c\u8bc1",children:"\u56db\u3001\u9a8c\u8bc1"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://www.ssllabs.com/ssltest/",children:"https://www.ssllabs.com/ssltest/"})})]})}function o(e={}){const{wrapper:s}={...(0,c.a)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>t});var l=n(7294);const c={},i=l.createContext(c);function t(e){const s=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);