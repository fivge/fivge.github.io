"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2826],{3905:function(e,t,n){n.d(t,{Zo:function(){return i},kt:function(){return d}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},i=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,i=c(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,k=u["".concat(s,".").concat(d)]||u[d]||m[d]||l;return n?o.createElement(k,a(a({ref:t},i),{},{components:n})):o.createElement(k,a({ref:t},i))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,a=new Array(l);a[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,a[1]=c;for(var p=2;p<l;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7855:function(e,t,n){n.r(t),n.d(t,{assets:function(){return i},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return m}});var o=n(3117),r=n(102),l=(n(7294),n(3905)),a=["components"],c={},s=void 0,p={unversionedId:"CloudNative/devops/docker-with-mysql",id:"CloudNative/devops/docker-with-mysql",title:"docker-with-mysql",description:"Docker",source:"@site/docs/CloudNative/devops/docker-with-mysql.md",sourceDirName:"CloudNative/devops",slug:"/CloudNative/devops/docker-with-mysql",permalink:"/docs/CloudNative/devops/docker-with-mysql",draft:!1,tags:[],version:"current",lastUpdatedAt:1685726734,formattedLastUpdatedAt:"Jun 2, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Docker Compose",permalink:"/docs/CloudNative/devops/docker-compose"},next:{title:"docker",permalink:"/docs/CloudNative/devops/docker"}},i={},m=[{value:"Docker",id:"docker",level:3},{value:"mysql",id:"mysql",level:3},{value:"mycli",id:"mycli",level:3},{value:"Connector to asp.net",id:"connector-to-aspnet",level:3},{value:"lamp",id:"lamp",level:3},{value:"mysql error",id:"mysql-error",level:3},{value:"mysql",id:"mysql-1",level:3}],u={toc:m};function d(e){var t=e.components,n=(0,r.Z)(e,a);return(0,l.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h3",{id:"docker"},"Docker"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://yeasy.gitbooks.io/docker_practice/content/introduction/what.html"},"https://yeasy.gitbooks.io/docker_practice/content/introduction/what.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker search ubuntu   ### \u67e5\u627e\u955c\u50cf\ndocker pull ubuntu     ### \u5b89\u88c5\u955c\u50cf\ndocker images / docker image ls    ### \u5217\u51fa\u955c\u50cf\ndocker image rm +id    ### \u5220\u9664\u955c\u50cf\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker run <image id>  -i -t /bin/bash  # -i \u540c\u6b65\u8f93\u5165  -t \u540c\u6b65\u8f93\u51fa -d \u6301\u7eed\u8fd0\u884c\n")),(0,l.kt)("h3",{id:"mysql"},"mysql"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"######\u5b89\u88c5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker pull hub.c.163.com/library/mysql:latest\n")),(0,l.kt)("blockquote",null,(0,l.kt)("h6",{parentName:"blockquote",id:"\u4f7f\u7528"},"\u4f7f\u7528")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p ~/mysql/data\n\ndocker run -p 3306:3306 --name mysql -v ~/mysql/data/:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=1234 -d hub.c.163.com/library/mysql:latest\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/d9b6bbc7fd77"},"https://www.jianshu.com/p/d9b6bbc7fd77")),(0,l.kt)("blockquote",null,(0,l.kt)("h6",{parentName:"blockquote",id:"\u5bb9\u5668\u5185\u8bbf\u95ee"},"\u5bb9\u5668\u5185\u8bbf\u95ee")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it mysql bash\n")),(0,l.kt)("h3",{id:"mycli"},"mycli"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A Terminal Client for MySQL with AutoCompletion and Syntax Highlighting.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"brew install mycli\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/dbcli/mycli"},"https://github.com/dbcli/mycli")),(0,l.kt)("blockquote",null,(0,l.kt)("h6",{parentName:"blockquote",id:"\u8fde\u63a5\u6570\u636e\u5e93"},"\u8fde\u63a5\u6570\u636e\u5e93")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mycli -h localhost -p 3306 -u root -p 1234\n")),(0,l.kt)("blockquote",null,(0,l.kt)("h6",{parentName:"blockquote",id:"\u6548\u679c\u56fe"},"\u6548\u679c\u56fe")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://ws3.sinaimg.cn/large/006tNc79ly1fn3jw2q8caj31ez0eqwgt.jpg",alt:null})),(0,l.kt)("h3",{id:"connector-to-aspnet"},"Connector to asp.net"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dev.mysql.com/downloads/connector/net/"},"https://dev.mysql.com/downloads/connector/net/")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/connector-net/en/connector-net-installation-unix.html"},"https://dev.mysql.com/doc/connector-net/en/connector-net-installation-unix.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"gacutil /i MySql.Data.dll\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://lazynight.me/2612.html"},"http://lazynight.me/2612.html")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/43263509/asp-net-core-how-to-create-a-connectionstring-on-macbook-pro/43267227"},"https://stackoverflow.com/questions/43263509/asp-net-core-how-to-create-a-connectionstring-on-macbook-pro/43267227")),(0,l.kt)("h3",{id:"lamp"},"lamp"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -itd -p 8989:80 -p 3306:3306 --name lamp -v ~/Docker/lamp:/var/www/html 14e0318d2c44\n\ndocker run -d -p 8080:80 -p 3306:3306 tutum/lamp\n#\u542f\u52a8\u5e94\u7528\u5e76\u6620\u5c04 8080 \u7aef\u53e3\u548c 3306 \u7aef\u53e3\n\n\ndocker run -p 3306:3306 --name mysql -v ~/mysql/data/:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=1234 -d hub.c.163.com/library/mysql:latest\n\n")),(0,l.kt)("h3",{id:"mysql-error"},"mysql error"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"[root@localhost ~]# mysql -u root -h 172.17.0.2 -p123456\nERROR 1130 (HY000): Host '172.17.0.1' is not allowed to connect to this MySQL server\n\u51fa\u73b0\u9519\u8bef\u7684\u539f\u56e0\uff1a\n\u5bb9\u5668\u7684\u7f51\u7edcip\u662f\u6839\u636e\u5bbf\u4e3b\u673a\u7684\u865a\u62df\u6865\u63a5\u7f51\u5361docker0\u81ea\u52a8\u5206\u914d\u7684\uff0c\u800cdocker0\u7684ip\u9ed8\u8ba4\u662f172.17.0.1.\n\u5bb9\u5668\u7684mysql\u5185\u9700\u8981\u7ed9\u8fd9\u4e2aip\u6388\u6743\u3002\n[root@localhost ~]# ifconfig\ndocker0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.0.1  netmask 255.255.0.0  broadcast 0.0.0.0\n..........\n\n\u767b\u9646\u5bb9\u5668\u5185\u7684mysql\uff0c\u8fdb\u884c\u6388\u6743\n[root@a02f56c3e731 /]# /usr/local/mysql/bin/mysql -p123456\n.......\nmysql> select host,user,password from mysql.user;\n+--------------+------+-------------------------------------------+\n| host         | user | password                                  |\n+--------------+------+-------------------------------------------+\n| localhost    | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |\n| 2ccd29e52286 | root |                                           |\n| 127.0.0.1    | root |                                           |\n| ::1          | root |                                           |\n| localhost    |      |                                           |\n| 2ccd29e52286 |      |                                           |\n+--------------+------+-------------------------------------------+\n6 rows in set (0.00 sec)\n\nmysql> grant all privileges on *.* to root@'%' identified by \"123456\";\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> select host,user,password from mysql.user;\n+--------------+------+-------------------------------------------+\n| host         | user | password                                  |\n+--------------+------+-------------------------------------------+\n| localhost    | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |\n| 2ccd29e52286 | root |                                           |\n| 127.0.0.1    | root |                                           |\n| ::1          | root |                                           |\n| localhost    |      |                                           |\n| 2ccd29e52286 |      |                                           |\n| %            | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |\n+--------------+------+-------------------------------------------+\n8 rows in set (0.00 sec)\n\n\u518d\u6b21\u5728\u5bbf\u4e3b\u673a\u672c\u673a\u5c1d\u8bd5\u8fde\u63a5\u5bb9\u5668\u7684mysql\uff0c\u53d1\u73b0\u53ef\u4ee5\u6b63\u5e38\u8fde\u63a5\uff01\n[root@localhost ~]# mysql -u root -h 172.17.0.2 -p123456\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://www.cnblogs.com/kevingrace/p/6425424.html"},"http://www.cnblogs.com/kevingrace/p/6425424.html")),(0,l.kt)("h3",{id:"mysql-1"},"mysql"),(0,l.kt)("blockquote",null,(0,l.kt)("h3",{parentName:"blockquote",id:"\u66f4\u6539\u5bc6\u7801"},"\u66f4\u6539\u5bc6\u7801")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"\u7528UPDATE\u76f4\u63a5\u7f16\u8f91user\u8868\n\nmysql -u root\n\nmysql> use mysql;\n\nmysql> UPDATE user SET Password = PASSWORD('newpass') WHERE user = 'root';\n\nmysql> FLUSH PRIVILEGES;\n")))}d.isMDXComponent=!0}}]);